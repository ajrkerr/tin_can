<html>
<head>
  <title>Socket.IO Chat</title>
  <link rel="stylesheet" type="text/css" href="css/style.css"/>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/src/web_rtc/common.js"></script>
  <script src="/src/web_rtc/responder.js"></script>
  <script src="/src/web_rtc/caller.js"></script>
  <script src="/src/tin_can.js"></script>
</head>

<body>
  <div style="width: 50%">
    <div class="cameras"></div>
  </div>


  <div style="width: 50%">
    <ul id="messages"></ul>

    <form action="">
      <input id="m" autocomplete="off"/>
      <submit class="send">Send</submit>
      <button class="call">Call</button>
    </form>
  </div>

  <script>
    var socket = io();
    var form = document.querySelector("form");

    form.addEventListener("submit", function (event) {
      event.preventDefault();
      var messageElement = document.getElementById('m');
      socket.emit('chat message', messageElement.value);
      messageElement.value = '';
    });

    socket.on("chat message", function (message) {
      console.log("Recieving Message:", message);
      var newElement = document.createElement("li");
      newElement.innerHTML = message;
      document.querySelector("#messages").appendChild(newElement);
    });
  </script>
</body>
</html>
